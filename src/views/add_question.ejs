<!DOCTYPE html>
<html>
  <head>
    <title>Add Question</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f4f4f4;

        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        font-family: "Montserrat", sans-serif;

        /* Add your background pattern here */
        background-color: #000000df;
    background-image: radial-gradient(rgba(231, 231, 231, 0.758) 2px, transparent 0);
    background-size: 35px 35px;
        animation: moveBackground 0.6s linear infinite;
      }
      @keyframes moveBackground {
        from {
          background-position: 0 0;
        }

        to {
          background-position: 0 -35px;
          /* Change the value to move the pattern upwards */
        }
      }

      h1 {
        text-align: center;
        color: #fff;
      }

      form {
        max-width: 600px;
        color: #fff;
        margin: 0 auto;
        background: transparent; /* Semi-transparent background */
        padding: 50px;
        border-radius: 8px;
        /* box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); */
        backdrop-filter: blur(3px); /* Adds blurry effect to the form */
        border: 2px solid rgba(255, 254, 254, 0.1); /* Adds a 1px border */
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      input[type="text"],
      input[type="number"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      input[type="radio"] {
        margin-right: 10px;
      }

      button {
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      button:hover {
        background-color: #0056b3;
      }

      .selected-answer {
        font-weight: bold;
        margin-top: 10px;
      }

      .option-container {
        display: flex;
        align-items: center;
      }

      .option-container input[type="text"] {
        margin: 10px;
        width: 400px;
      }

      .submitBtn {
        width: 120px;
        height: 40px;
        border-radius: 30px;
        border: none;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.13);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-weight: 600;
        cursor: pointer;
        color: white;
        background: linear-gradient(to left, rgb(230, 35, 0), rgb(255, 174, 0));
        letter-spacing: 0.7px;
      }

      .submitBtn:hover .arrow {
        animation: slide-in-left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
      }

      @keyframes slide-in-left {
        0% {
          transform: translateX(-10px);
          opacity: 0;
        }

        100% {
          transform: translateX(0px);
          opacity: 1;
        }
      }

      .submitBtn:active {
        transform: scale(0.97);
      }
      .input {
        width: 100%;
        /* max-width: 220px; */
        /* height: 45px; */
        padding: 12px;
        border-radius: 12px;
        border: 1.5px solid lightgrey;
        outline: none;
        transition: all 0.3s cubic-bezier(0.19, 1, 0.22, 1);
        box-shadow: 0px 0px 20px -18px;
      }

      .input:hover {
        border: 2px solid lightgrey;
        box-shadow: 0px 0px 20px -17px;
      }

      .input:active {
        transform: scale(0.95);
      }

      
    </style>
  </head>

  <body>
    <div class="container">
      <h1>Add Questions</h1>
      <form action="/add_question_save" method="post">
        <label for="subject">Subject :</label><br />
        <input
          type="text"
          class="input"
          id="subject"
          name="subject"
        /><br /><br />
        <div
          style="
            display: flex;
            align-items: center;
            gap: 20px;
            justify-content: center;
            height: 60px;
          "
        >
          <label for="negativeMarking">Negative Marking:</label>
          <select id="negativeMarking" name="negativeMarking">
            <option value="0" default>0</option>
            <option value="0.25">0.25</option>
            <option value="0.5">0.5</option>
            <option value="0.75">0.75</option>
            <option value="1">1</option></select
          ><br /><br />
        </div>

        <div id="questions">
          <div class="question">
            <label for="question1">Question :</label><br />
            <input
              type="text"
              class="questionField input"
              name="questions[][question]"
              required
            /><br /><br />

            <label for="marks1">Marks:</label><br />
            <input
              type="number"
              class="questionField input"
              name="questions[][marks]"
              required
            /><br /><br />

            <div class="option-container">
              <label for="option1">Option 1:</label><br />
              <input
                type="text"
                class="questionField input"
                name="questions[][options][]"
                required
              />
              <input
                type="radio"
                name="questions[0][correctAnswer]"
                value="0"
              />
            </div>
            <br /><br />

            <div class="option-container">
              <label for="option2">Option 2:</label><br />
              <input
                type="text"
                class="questionField input"
                name="questions[][options][]"
                required
              />
              <input
                type="radio"
                name="questions[0][correctAnswer]"
                value="1"
              />
            </div>
            <br /><br />

            <div class="option-container">
              <label for="option3">Option 3:</label><br />
              <input
                type="text"
                class="questionField input"
                name="questions[][options][]"
                required
              />
              <input
                type="radio"
                name="questions[0][correctAnswer]"
                value="2"
              />
            </div>
            <br /><br />

            <div class="option-container">
              <label for="option4">Option 4:</label><br />
              <input
                type="text"
                class="questionField input"
                name="questions[][options][]"
                required
              />
              <input
                type="radio"
                name="questions[0][correctAnswer]"
                value="3"
              />
            </div>
            <br /><br />

            <!-- <label for="selectedAnswer1">Selected Correct Answer:</label>
          <span id="selectedAnswer1" class="selected-answer"></span><br /><br /> -->
          </div>
        </div>

        <!-- <button type="button" id="addQuestion">Add Another Question</button
      ><br /><br /> -->

        <!-- <input type="submit" value="Submit" /> -->
        <div style="display: flex; justify-content: center">
          <button type="submit" class="submitBtn">
            Submit
            <svg fill="white" viewBox="0 0 448 512" height="1em" class="arrow">
              <path
                d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"
              ></path>
            </svg>
          </button>
        </div>
      </form>
    </div>

    <script>
      let questionCount = 1;

      document
        .getElementById("addQuestion")
        .addEventListener("click", function () {
          questionCount++;

          const questionsDiv = document.getElementById("questions");
          const newQuestionDiv = document.createElement("div");
          newQuestionDiv.classList.add("question");

          const fields = [
            "question",
            "marks",
            "option1",
            "option2",
            "option3",
            "option4",
          ];
          fields.forEach((field) => {
            const label = document.createElement("label");
            label.textContent = field.includes("question")
              ? `Question ${questionCount}:`
              : field.includes("marks")
              ? "Marks:"
              : field.includes("option")
              ? `Option ${field[field.length - 1]}:`
              : "";
            label.htmlFor =
              field +
              document.querySelectorAll("." + field).length / fields.length;
            const input = document.createElement("input");
            input.type = field.includes("marks") ? "number" : "text";
            input.name = `questions[][${
              field.includes("question")
                ? "question"
                : field.includes("marks")
                ? "marks"
                : "options"
            }][]`;
            input.classList.add("questionField", field);
            input.id =
              field +
              document.querySelectorAll("." + field).length / fields.length;
            newQuestionDiv.appendChild(label);
            newQuestionDiv.appendChild(document.createElement("br"));

            if (field.includes("question") || field.includes("marks")) {
              newQuestionDiv.appendChild(input);
            } else if (field.includes("option")) {
              const optionContainer = document.createElement("div");
              optionContainer.classList.add("option-container");

              optionContainer.appendChild(label);
              optionContainer.appendChild(input);

              const radio = document.createElement("input");
              radio.type = "radio";
              radio.name = `questions[${questionCount - 1}][correctAnswer]`;
              radio.value =
                document.querySelectorAll("." + field).length / fields.length;
              optionContainer.appendChild(radio);

              newQuestionDiv.appendChild(optionContainer);
            }

            newQuestionDiv.appendChild(document.createElement("br"));
            newQuestionDiv.appendChild(document.createElement("br"));
          });

          const selectedAnswerSpan = document.createElement("span");
          selectedAnswerSpan.id = `selectedAnswer${questionCount}`;
          selectedAnswerSpan.classList.add("selected-answer");
          newQuestionDiv.appendChild(selectedAnswerSpan);

          questionsDiv.appendChild(newQuestionDiv);
        });

      const radioButtons = document.querySelectorAll('input[type="radio"]');
      radioButtons.forEach((radio) => {
        radio.addEventListener("change", function () {
          if (this.checked) {
            const questionIndex = this.name.match(/\d+/g)[0];
            const selectedAnswer = `Question ${
              parseInt(questionIndex) + 1
            }: Option ${this.value}`;
            document.getElementById(
              `selectedAnswer${questionIndex}`
            ).innerText = selectedAnswer;
          }
        });
      });
    </script>
  </body>
</html>
